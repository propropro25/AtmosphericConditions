<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Atmospheric Activity Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      background: #f4f4f4;
      color: #111;
      font-family: 'Inter', 'Roboto', sans-serif;
      margin: 0;
      padding: 20px;
      line-height: 1.6;
    }
    h1 {
      text-align: center;
      font-size: 2em;
      margin-bottom: 20px;
    }
    .section {
      margin-bottom: 40px;
      padding: 20px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .section h2 {
      font-size: 1.4em;
      margin-bottom: 10px;
    }
    .data-block img, .data-block iframe, .data-block video {
      max-width: 100%;
      margin: 10px 0;
    }
    .toggle {
      margin-top: 10px;
      background: #eee;
      padding: 10px;
      border-radius: 4px;
      display: none;
    }
    .btn-toggle {
      background: none;
      border: none;
      color: #0073aa;
      cursor: pointer;
      font-size: 0.9em;
      margin-top: 5px;
    }
    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #ddd;
      text-align: center;
      padding: 8px;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <h1>Atmospheric Activity Dashboard</h1>

  <div class="section">
    <h2>Kp Index (Current & Forecast)</h2>
    <div class="data-block">
      <img src="https://services.swpc.noaa.gov/images/planetary-k-index.png" alt="Kp Index" />
      <img src="https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.png" alt="Kp Forecast" />
      <button class="btn-toggle" onclick="toggle('kp-info')">What does this mean?</button>
      <div class="toggle" id="kp-info">
        The K-index indicates geomagnetic activity levels. Values 0â€“4 are quiet, 5 is storm-level, 6+ indicates major disturbances that can impact electronics, satellites, navigation, and human bioelectrical systems.
      </div>
    </div>
  </div>

  <div class="section">
    <h2>Interplanetary Magnetic Field & Bz</h2>
    <div class="data-block">
      <img src="https://services.swpc.noaa.gov/images/mag-3-day.gif" alt="IMF & Bz" />
      <button class="btn-toggle" onclick="toggle('bz-info')">What does this mean?</button>
      <div class="toggle" id="bz-info">
        The Bz component of the interplanetary magnetic field determines how much solar energy can penetrate Earth's magnetic shield. Negative Bz values (southward) increase geomagnetic disruption.
      </div>
    </div>
  </div>

  <div class="section">
    <h2>CCOR CME Video</h2>
    <div class="data-block">
      <video controls>
        <source src="https://services.swpc.noaa.gov/products/ccor1/mp4s/ccor1_last_7_days.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>
  </div>

  <div class="section">
    <h2>ENLIL Solar Wind Forecast</h2>
    <div class="data-block">
      <img src="https://services.swpc.noaa.gov/images/animations/enlil/latest.jpg" alt="ENLIL forecast" />
    </div>
  </div>

  <div class="section">
    <h2>GOES X-ray Flux</h2>
    <div class="data-block">
      <img src="https://services.swpc.noaa.gov/images/goes-xray-flux.gif" alt="X-ray Flux" />
    </div>
  </div>

  <div class="section">
    <h2>Solar Wind Speed & Density</h2>
    <div class="data-block">
      <img src="https://services.swpc.noaa.gov/images/ace-swepam-24-hour.gif" alt="Solar Wind" />
    </div>
  </div>

  <div class="section">
    <h2>Boulder Magnetometer</h2>
    <div class="data-block">
      <img src="https://services.swpc.noaa.gov/images/boulder-magnetometer.png" alt="Boulder Magnetometer" />
    </div>
  </div>

  <div class="section">
    <h2>Schumann Resonance</h2>
    <div class="data-block">
      <iframe src="https://geocenter.info/en/monitoring/schumann" width="100%" height="600"></iframe>
    </div>
  </div>
  <div class="section">
    <h2>DRAP Global Absorption</h2>
    <div class="data-block">
      <img src="https://services.swpc.noaa.gov/images/drap_global.png" alt="DRAP Map" />
    </div>
  </div>

  <div class="section">
    <h2>U.S. Geoelectric Field Map</h2>
    <div class="data-block">
      <img src="https://services.swpc.noaa.gov/images/us-geo-electric-field.png" alt="Geoelectric Field" />
    </div>
  </div>

  <div class="section">
    <h2>CTIPE Ionospheric TEC</h2>
    <div class="data-block">
      <img src="https://services.swpc.noaa.gov/images/ctipe-total-electron-content.png" alt="Ionosphere TEC" />
    </div>
  </div>

  <div class="section">
    <h2>Moon Phase & Lunar Events</h2>
    <div class="data-block" id="moonData">
      Loading moon data...
    </div>
  </div>

  <div class="section">
    <h2>30-Day Kp Forecast Calendar</h2>
    <div class="data-block">
      <img src="https://services.swpc.noaa.gov/images/30-day-planetary-k-index.png" alt="30-Day Kp Calendar" />
    </div>
  </div>

  <footer id="timestamp"></footer>

  <script>
    function toggle(id) {
      const el = document.getElementById(id);
      if (el.style.display === "block") {
        el.style.display = "none";
      } else {
        el.style.display = "block";
      }
    }

    // Floating UTC timestamp
    const footer = document.getElementById('timestamp');
    const now = new Date();
    footer.innerText = "Last updated: " + now.toUTCString();

    // Simple moon phase + next events
    function getMoonData() {
      const synodicMonth = 29.53058867;
      const newMoonRef = new Date("2024-06-06T12:38:00Z");
      const now = new Date();
      const daysSinceNew = (now - newMoonRef) / (1000 * 60 * 60 * 24);
      const currentPhase = daysSinceNew % synodicMonth;

      let phase = "";
      if (currentPhase < 1.8457) phase = "New Moon";
      else if (currentPhase < 5.5369) phase = "Waxing Crescent";
      else if (currentPhase < 9.2281) phase = "First Quarter";
      else if (currentPhase < 12.9193) phase = "Waxing Gibbous";
      else if (currentPhase < 16.6105) phase = "Full Moon";
      else if (currentPhase < 20.3017) phase = "Waning Gibbous";
      else if (currentPhase < 23.9929) phase = "Last Quarter";
      else if (currentPhase < 27.6841) phase = "Waning Crescent";
      else phase = "New Moon";

      const nextFullMoon = new Date(newMoonRef.getTime() + Math.ceil((daysSinceNew / synodicMonth)) * synodicMonth * 24 * 60 * 60 * 1000 + (15 * 24 * 60 * 60 * 1000));
      const nextNewMoon = new Date(newMoonRef.getTime() + Math.ceil((daysSinceNew / sy
